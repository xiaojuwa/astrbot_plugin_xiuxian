# AstrBot 插件：文字修仙

**版本:** 2.2.0

一款为 AstrBot 设计的、功能丰富的放置类修仙游戏插件。让你在聊天群中体验从凡人到大能的修行之路，工作摸鱼、畅聊吹水的同时亦可得道飞升！

非常感谢 [@Zhalslar](https://github.com/Zhalslar) 提供的模块化思路，十分清晰的重构了整个插件的结构。

## v2.2.0 更新

### 新增系统

1. **排行榜系统**: 新增境界排行、财富排行、战力排行三大榜单，支持查看个人排名。
2. **每日任务系统**: 每日5个任务（闭关、签到、秘境探索、Boss讨伐、切磋），完成全部可领取500灵石全勤奖励。
3. **奇遇系统**: 每日3次奇遇机会，包含8种普通奇遇和2种稀有奇遇，奖励随境界提升。
4. **天劫系统**: 高境界修士需渡天劫方可继续突破，共4重天劫，难度递增。
5. **悬赏任务系统**: 7种不同难度的悬赏任务，每日可完成5次，获取灵石和修为奖励。

### 优化改进

6. **签到刷新优化**: 签到刷新时间改为每日0点重置，更符合玩家习惯。
7. **帮助系统更新**: 完善帮助指令，涵盖所有40+游戏指令。

## 插件特色

* **完整的成长体验**: 从创建角色、闭关修炼，到突破境界，体验完整的修仙成长路线。
* **动态生成的无尽挑战**: 基于强大的标签系统，怪物和秘境可以被动态生成，每一次的战斗和探索都独一无二。
* **深度的经济与物品系统**: 拥有超过40种物品。通过坊市购买丹药、材料，管理个人背包，让每一块灵石都有其价值。
* **丰富的社交互动**: 创建或加入宗门，与其他道友共谋发展，不再是孤独的散修。
* **多元化玩法**: 排行榜竞争、每日任务、奇遇探索、天劫挑战、悬赏任务，玩法丰富不枯燥。
* **高度自由配置**: 插件的核心指令、数值、游戏规则、物品、怪物、Boss乃至其特性标签，均可通过 `.json` 文件进行修改，方便服主打造专属服务器生态。
* **规范化数据管理**: 玩家数据使用 aiosqlite 独立存储，并包含专业的数据库迁移系统，保证了数据的安全、隔离与长期演进能力。

## 快速开始

*(确保你的 AstrBot 实例已正确加载此插件)*

1. **开启你的修仙之路**: 在任意聊天窗口（QQ群或私聊），发送：
   `我要修仙`

2. **获取帮助**:
   发送 `修仙帮助` 查看所有可用的游戏指令。

## 游戏指令

### 入门指引

| 指令 | 说明 |
| :--- | :--- |
| `我要修仙` | 开启修仙之旅，创建角色 |
| `我的信息` | 查看人物信息 |
| `签到` | 每日签到（0点刷新） |

### 修炼成长

| 指令 | 说明 |
| :--- | :--- |
| `闭关` | 开始闭关修炼 |
| `出关` | 结束闭关 |
| `突破` | 尝试突破境界 |
| `重入仙途` | 重置灵根 |

### 坊市物品

| 指令 | 说明 |
| :--- | :--- |
| `商店` | 查看坊市商品 |
| `我的背包` | 查看背包 |
| `购买 <名> [数]` | 购买物品 |
| `使用 <名> [数]` | 使用/装备物品 |
| `我的装备` | 查看装备 |
| `卸下 <部位>` | 卸下装备（武器/防具/饰品） |

### 宗门社交

| 指令 | 说明 |
| :--- | :--- |
| `创建宗门 <名>` | 创建宗门 |
| `加入宗门 <名>` | 加入宗门 |
| `我的宗门` | 查看宗门 |
| `退出宗门` | 退出宗门 |

### 战斗探险

| 指令 | 说明 |
| :--- | :--- |
| `切磋 @某人` | 切磋比试 |
| `查看世界boss` | 查看世界Boss |
| `讨伐boss <ID>` | 讨伐Boss |
| `探索秘境` | 进入秘境 |
| `前进` | 秘境前进 |
| `离开秘境` | 离开秘境 |

### 排行榜

| 指令 | 说明 |
| :--- | :--- |
| `境界排行` | 查看境界排行榜 |
| `财富排行` | 查看财富排行榜 |
| `战力排行` | 查看战力排行榜 |
| `我的排名` | 查看个人排名 |

### 每日任务

| 指令 | 说明 |
| :--- | :--- |
| `每日任务` | 查看每日任务 |
| `领取任务奖励` | 领取任务奖励 |

### 奇遇探索

| 指令 | 说明 |
| :--- | :--- |
| `奇遇` | 触发奇遇（每日3次） |
| `奇遇状态` | 查看奇遇状态 |

### 天劫系统

| 指令 | 说明 |
| :--- | :--- |
| `天劫信息` | 查看天劫信息 |
| `渡劫` | 挑战天劫 |

### 悬赏任务

| 指令 | 说明 |
| :--- | :--- |
| `悬赏榜` | 查看悬赏榜 |
| `接取悬赏 <名>` | 接取悬赏任务 |
| `悬赏状态` | 查看悬赏状态 |

## 配置文件说明

本插件所有配置均在插件目录下的 `.json` 文件中，无需改动代码。

* **`_conf_schema.json`**: 插件主配置文件。包含访问控制、数值配置、文件路径等核心设置。
    * `ACCESS_CONTROL.WHITELIST_GROUPS`: 群聊白名单配置，留空表示所有群聊都可用。
    * `VALUES.SHOP_DAILY_ITEM_COUNT`: 每日坊市随机上架的商品种类数量。
    * `REALM_RULES.REALM_BOSS_SCALING_FACTOR`: 秘境最终Boss的强度缩放系数（例如0.7代表70%强度）。
* **`tags.json`**: 怪物标签系统。定义了所有怪物特性的基础模板，如属性、掉落物、名称前后缀等，是动态内容生成的核心。
* **`level_config.json`**: 境界配置文件。定义了所有境界的名称、升级所需修为和突破成功率。
* **`items.json`**: 物品配置文件。定义了所有物品的名称、描述、价格和使用效果。**法器类物品需配置 `subtype` 和 `equip_effects` 字段**。
* **`monsters.json` / `bosses.json`**: 怪物与Boss配置文件。仅需定义基础模板和需要附加的标签，具体数值由生成器动态创建。

### 白名单配置示例

如果您希望插件只在特定群聊中生效，可以在AstrBot的插件配置界面中配置白名单：

1. 进入插件配置页面
2. 找到"访问控制"配置项
3. 在"白名单群号列表"中添加允许使用的QQ群号
4. 留空则表示所有群聊都可用

## 数据库版本

当前数据库版本：**v10**

插件包含完善的数据库迁移系统，升级插件时会自动迁移数据，无需手动操作。

## 后续更新

本插件未来计划加入更多有趣的系统，例如：

* **炼器系统**: 引入装备合成与强化系统。
* **宗门扩展**: 增加宗门任务、宗门仓库、宗门贡献度等玩法。
* **管理员工具**: 提供更便捷的方式修改游戏数据。
* **钱庄系统**: 修仙界的银行。
* **娱乐玩法**: 内置简单的小游戏消费灵石。

## 贡献

欢迎通过提 Issue 或 Pull Request 的方式贡献代码、报告 Bug 或提出宝贵的建议。

## 许可证

本插件采用 AGPL-3.0 许可证。
